@model IntegralInvesting.Models.StockDetailsViewModel

@{ ViewData["Title"] = "Purchase Stocks"; }

@{
    if (ViewData["ErrorMessage"] != null)
    {
        <h4>@ViewData["ErrorMessage"]</h4>
    }
}

@{
    if (Model.Symbol != null)
    {
        
        <div class="row">
            <h3 class="col-8">@ViewData["StockName"]</h3>
            <!-- Purchase button -->
            <a class="btn green-button col-4" data-modal="" id="btnOpenPurchaseModal" onclick="OpenPurchaseSharesModal('@ViewData["StockName"]', '@ViewData["Price"]', '@ViewData["Symbol"]')">
                Purchase
            </a>
        </div>

        <h4 class="main-green" style="margin-top: 0.5em;">Current Data</h4>
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th> @Html.DisplayNameFor(model => model.High) </th>
                    <th> @Html.DisplayNameFor(model => model.Low)  </th>
                    <th> @Html.DisplayNameFor(model => model.Price) </th>
                    <th> @Html.DisplayNameFor(model => model.Volume) </th>
                </tr>
            </thead>
            <tbody>
                @{
                    <tr>
                        <td> @Html.DisplayFor(modelItem => modelItem.High) </td>
                        <td> @Html.DisplayFor(modelItem => modelItem.Low)  </td>
                        <td> @Html.DisplayFor(modelItem => modelItem.Price) </td>
                        <td> @Html.DisplayFor(modelItem => modelItem.Volume) </td>
                    </tr>
                }
            </tbody>
        </table>

        <h4 class="main-green" style="margin-top: 0.5em;">Data From Past 7 Days</h4>
        <table class="table table-bordered table-striped">
            <thead>
                <tr>
                    <th> Date </th>
                    <th> High </th>
                    <th> Low  </th>
                    <th> Open </th>
                    <th> Close </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model.StockTimeDetailsList)
                {
                    <tr>
                        <td> @item.Timestamp.ToShortDateString() </td>
                        <td> @item.High </td>
                        <td> @item.Low  </td>
                        <td> @item.Open </td>
                        <td> @item.Close </td>
                    </tr>
                } 
            </tbody>
        </table>
    }
}

